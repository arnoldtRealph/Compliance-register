<!DOCTYPE html>
<html lang="af">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compliance Register</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <header>
        <h1>Compliance Register vir Lesbeplanning</h1>
    </header>

    <section id="department">
        <h2>Wetenskappe Departement</h2>
        <div class="department-buttons">
            <button class="btn">Natuurwetenskappe</button>
            <button class="btn">Lewenswetenskappe</button>
            <button class="btn">Fisiese Wetenskappe</button>
            <button class="btn">CAT</button>
        </div>
    </section>

    <section id="vakke">
        <table>
            <thead>
                <tr>
                    <th>Vak</th>
                    <th>Graad</th>
                    <th>Opvoeder</th>
                    <th>Lêer opgelaai</th>
                    <th>Lesbeplanning Laaste Monitor</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Natuurwetenskappe</td>
                    <td>Gr. 9</td>
                    <td>Juffrou P Koopman & S Erasmus</td>
                    <td><input type="file" accept=".pdf,.doc,.docx,.xls,.xlsx" onchange="uploadFile(this, 'natuurwet')"></td>
                    <td id="natuurwet">Geen lêer opgelaai nie</td>
                </tr>
                <tr>
                    <td>Lewenswetenskappe</td>
                    <td>Gr. 10-12</td>
                    <td>S Erasmus en L Lubbe</td>
                    <td><input type="file" accept=".pdf,.doc,.docx,.xls,.xlsx" onchange="uploadFile(this, 'lewe')"></td>
                    <td id="lewe">Geen lêer opgelaai nie</td>
                </tr>
                <tr>
                    <td>Fisiese Wetenskappe</td>
                    <td>Gr. 10-12</td>
                    <td>Juffrou L Lubbe & Juffrou TK Pieterse</td>
                    <td><input type="file" accept=".pdf,.doc,.docx,.xls,.xlsx" onchange="uploadFile(this, 'fisiese')"></td>
                    <td id="fisiese">Geen lêer opgelaai nie</td>
                </tr>
                <tr>
                    <td>CAT</td>
                    <td>Gr. 10-12</td>
                    <td>Mnr. C Farmer</td>
                    <td><input type="file" accept=".pdf,.doc,.docx,.xls,.xlsx" onchange="uploadFile(this, 'cat')"></td>
                    <td id="cat">Geen lêer opgelaai nie</td>
                </tr>
            </tbody>
        </table>
    </section>

    <footer>
        <p>&copy; 2025 Compliance Register | Webwerf ontwerp deur Mnr AR Visagie</p>
    </footer>

    <!-- Firebase -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "JOU_API_KEY",
            authDomain: "JOU_PROJECT_ID.firebaseapp.com",
            projectId: "JOU_PROJECT_ID",
            storageBucket: "JOU_PROJECT_ID.appspot.com",
            messagingSenderId: "JOU_MESSAGING_SENDER_ID",
            appId: "JOU_APP_ID"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const storage = getStorage(app);

        // Voeg 'n nuwe les by Firestore
        async function voegLesBy() {
            try {
                await addDoc(collection(db, "lesse"), {
                    vak: "Fisiese Wetenskappe",
                    onderwyser: "Juffrou Pieterse",
                    datum: new Date().toISOString(),
                    status: "Geplande Les"
                });
                alert("Les suksesvol bygevoeg!");
            } catch (e) {
                console.error("Fout met byvoeging:", e);
                alert("Kon nie les byvoeg nie.");
            }
        }

        // Funksie om lêers na Firebase Storage op te laai
        async function uploadFile(inputElement, vak) {
            if (inputElement.files.length > 0) {
                const file = inputElement.files[0];
                const storageRef = ref(storage, `lesbeplanning/${vak}/${file.name}`);

                try {
                    await uploadBytes(storageRef, file);
                    const downloadURL = await getDownloadURL(storageRef);
                    document.getElementById(vak).innerHTML = `<a href="${downloadURL}" target="_blank">Lêer afgelaai: ${file.name}</a>`;
                    alert("Lêer suksesvol opgelaai!");
                } catch (error) {
                    console.error("Fout met oplaaI: ", error);
                    alert("Lêer kon nie opgelaai word nie.");
                }
            }
        }
    </script>

</body>
</html>
